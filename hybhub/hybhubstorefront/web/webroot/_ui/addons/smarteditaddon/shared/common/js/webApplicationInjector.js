!function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b():"function"==typeof define&&define.amd?define(b):this[a]=b()}("$script",function(){function a(a,b){for(var c=0,d=a.length;d>c;++c)if(!b(a[c]))return i;return 1}function b(b,c){a(b,function(a){return!c(a)})}function c(f,g,h){function i(a){return a.call?a():m[a]}function k(){if(!--s){m[r]=1,q&&q();for(var c in o)a(c.split("|"),i)&&!b(o[c],i)&&(o[c]=[])}}f=f[j]?f:[f];var l=g&&g.call,q=l?g:h,r=l?f.join(""):g,s=f.length;return setTimeout(function(){b(f,function a(b,c){return null===b?k():(b=c||-1!==b.indexOf(".js")||/^https?:\/\//.test(b)||!e?b:e+b+".js",p[b]?(r&&(n[r]=1),2==p[b]?k():setTimeout(function(){a(b,!0)},0)):(p[b]=1,r&&(n[r]=1),void d(b,k)))})},0),c}function d(a,b){var c,d=g.createElement("script");d.onload=d.onerror=d[l]=function(){d[k]&&!/^c|loade/.test(d[k])||c||(d.onload=d[l]=null,c=1,p[a]=2,b())},d.async=1,d.src=f?a+(-1===a.indexOf("?")?"?":"&")+f:a,h.insertBefore(d,h.lastChild)}var e,f,g=document,h=g.getElementsByTagName("head")[0],i=!1,j="push",k="readyState",l="onreadystatechange",m={},n={},o={},p={};return c.get=d,c.order=function(a,b,d){!function e(f){f=a.shift(),a.length?c(f,e):c(f,b,d)}()},c.path=function(a){e=a},c.urlArgs=function(a){f=a},c.ready=function(d,e,f){d=d[j]?d:[d];var g=[];return!b(d,function(a){m[a]||g[j](a)})&&a(d,function(a){return m[a]})?e():!function(a){o[a]=o[a]||[],o[a][j](e),f&&f(g)}(d.join("|")),c},c.done=function(a){c([null],a)},c}),function(a){function b(b,c){if(!/^(https?:)\/\/([-.a-zA-Z0-9]+(:[0-9]{1,5})?)$/.test(b))return!1;var d=a.document.createElement("a");return d.href=b,"https:"===c.protocol&&"https:"!==d.protocol?!1:i.some(function(a){return a.lastIndex=0,a.test(d.host)})}function c(){parent.postMessage({pk:Math.random(),gatewayId:j,eventId:"unloading",data:{location:document.location.href}},"*")}var d=function(){return new RegExp(/^(([-*a-zA-Z0-9]+[.])*([-a-zA-Z0-9]+[.]))?[-a-zA-Z0-9]+(:[0-9]{1,5})?$/)},e=[a.location.host],f=document.currentScript||document.querySelector("script#smartedit-injector");if(f){var g=f.getAttribute("data-smartedit-allow-origin");if(!g){var h=a.document.createElement("a");h.href=f.src,h.search.replace(/([?&])([^&=]+)=([^&]*)?/g,function(a,b,c,d){"allow-origin"===c&&(g=decodeURI(d))})}g&&(e=e.concat(g.split(",")))}var i=e.map(function(a){var b=a.trim();if(d().test(b)){var c=["^","$"].join(b.replace(/\./g,"\\.").replace(/\*/g,"[-a-zA-Z0-9]*"));return new RegExp(c)}throw new Error("Allowed whitelist characters are a-Z, A-Z, 0-9, - or period. A wildcard * can be used to represent a prefixed domain. E.g.: *.domain.com can be used for subdomain.domain.com.")}),j="smartEditBootstrap";parent.postMessage({pk:Math.random(),gatewayId:j,eventId:"loading",data:{location:document.location.href}},"*"),a.onbeforeunload=c,function m(){var a=500,b="heartBeatGateway",c="heartBeat";parent.postMessage({pk:Math.random(),gatewayId:b,eventId:c,data:{location:document.location.href}},"*"),setTimeout(m,a)}(),a.addEventListener("load",function(){parent.postMessage({pk:Math.random(),gatewayId:j,eventId:"bootstrapSmartEdit",data:{location:document.location.href}},"*")});var k=function(a,b,c){c<b.length&&$script(b[c],function(){k(a,b,c+1)})},l=function(a,b,c){var d=document.createElement("link");d.rel="stylesheet",d.href=b[c],a.appendChild(d),c+1<b.length&&l(a,b,c+1)};a.addEventListener("message",function(c){if(!b(c.origin,a.location))throw new Error(c.origin+" is not allowed to override this storefront.");var d=c.data;if(d.gatewayId===j&&"bundle"===d.eventId){var e=d.data;if(a.smartedit=a.smartedit||{},e.resources&&e.resources.properties)for(var f in e.resources.properties)a.smartedit[f]=e.resources.properties[f];var g=document.getElementsByTagName("head")[0];e.resources&&e.resources.js&&e.resources.js.length>0&&k(g,e.resources.js,0),e.resources&&e.resources.css&&e.resources.css.length>0&&l(g,e.resources.css,0)}},!1),a.SmarteditWAI={},a.SmarteditWAI.isAllowed=b,a.SmarteditWAI.createAllowOriginRegex=d,Object.freeze(a.SmarteditWAI)}(window);